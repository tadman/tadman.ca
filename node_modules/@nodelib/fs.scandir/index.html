<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>@nodelib/fs.scandir</title>
    <link rel="stylesheet" media="all" href="/assets/css/main.css"/>
  </head>
  <body class="bg-blue-900 p-8">
    <h1 id="nodelibfsscandir">@nodelib/fs.scandir</h1>

<blockquote>
  <p>List files and directories inside the specified directory.</p>
</blockquote>

<h2 id="bulb-highlights">:bulb: Highlights</h2>

<p>The package is aimed at obtaining information about entries in the directory.</p>

<ul>
  <li>:moneybag: Returns useful information: <code class="language-plaintext highlighter-rouge">name</code>, <code class="language-plaintext highlighter-rouge">path</code>, <code class="language-plaintext highlighter-rouge">dirent</code> and <code class="language-plaintext highlighter-rouge">stats</code> (optional).</li>
  <li>:gear: On Node.js 10.10+ uses the mechanism without additional calls to determine the entry type. See <a href="#old-and-modern-mode"><code class="language-plaintext highlighter-rouge">old</code> and <code class="language-plaintext highlighter-rouge">modern</code> mode</a>.</li>
  <li>:link: Can safely work with broken symbolic links.</li>
</ul>

<h2 id="install">Install</h2>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">npm install @nodelib/fs.scandir
</span></code></pre></div></div>

<h2 id="usage">Usage</h2>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">fsScandir</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">@nodelib/fs.scandir</span><span class="dl">'</span><span class="p">;</span>

<span class="nx">fsScandir</span><span class="p">.</span><span class="nx">scandir</span><span class="p">(</span><span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">stats</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">});</span>
</code></pre></div></div>

<h2 id="api">API</h2>

<h3 id="scandirpath-optionsorsettings-callback">.scandir(path, [optionsOrSettings], callback)</h3>

<p>Returns an array of plain objects (<a href="#entry"><code class="language-plaintext highlighter-rouge">Entry</code></a>) with information about entry for provided path with standard callback-style.</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">fsScandir</span><span class="p">.</span><span class="nx">scandir</span><span class="p">(</span><span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">entries</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">});</span>
<span class="nx">fsScandir</span><span class="p">.</span><span class="nx">scandir</span><span class="p">(</span><span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">,</span> <span class="p">{},</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">entries</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">});</span>
<span class="nx">fsScandir</span><span class="p">.</span><span class="nx">scandir</span><span class="p">(</span><span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">,</span> <span class="k">new</span> <span class="nx">fsScandir</span><span class="p">.</span><span class="nx">Settings</span><span class="p">(),</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">entries</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <span class="cm">/* … */</span> <span class="p">});</span>
</code></pre></div></div>

<h3 id="scandirsyncpath-optionsorsettings">.scandirSync(path, [optionsOrSettings])</h3>

<p>Returns an array of plain objects (<a href="#entry"><code class="language-plaintext highlighter-rouge">Entry</code></a>) with information about entry for provided path.</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">entries</span> <span class="o">=</span> <span class="nx">fsScandir</span><span class="p">.</span><span class="nx">scandirSync</span><span class="p">(</span><span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">entries</span> <span class="o">=</span> <span class="nx">fsScandir</span><span class="p">.</span><span class="nx">scandirSync</span><span class="p">(</span><span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">,</span> <span class="p">{});</span>
<span class="kd">const</span> <span class="nx">entries</span> <span class="o">=</span> <span class="nx">fsScandir</span><span class="p">.</span><span class="nx">scandirSync</span><span class="p">((</span><span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">,</span> <span class="k">new</span> <span class="nx">fsScandir</span><span class="p">.</span><span class="nx">Settings</span><span class="p">());</span>
</code></pre></div></div>

<h4 id="path">path</h4>

<ul>
  <li>Required: <code class="language-plaintext highlighter-rouge">true</code></li>
  <li>Type: <code class="language-plaintext highlighter-rouge">string | Buffer | URL</code></li>
</ul>

<p>A path to a file. If a URL is provided, it must use the <code class="language-plaintext highlighter-rouge">file:</code> protocol.</p>

<h4 id="optionsorsettings">optionsOrSettings</h4>

<ul>
  <li>Required: <code class="language-plaintext highlighter-rouge">false</code></li>
  <li>Type: <code class="language-plaintext highlighter-rouge">Options | Settings</code></li>
  <li>Default: An instance of <code class="language-plaintext highlighter-rouge">Settings</code> class</li>
</ul>

<p>An <a href="#options"><code class="language-plaintext highlighter-rouge">Options</code></a> object or an instance of <a href="#settingsoptions"><code class="language-plaintext highlighter-rouge">Settings</code></a> class.</p>

<blockquote>
  <p>:book: When you pass a plain object, an instance of the <code class="language-plaintext highlighter-rouge">Settings</code> class will be created automatically. If you plan to call the method frequently, use a pre-created instance of the <code class="language-plaintext highlighter-rouge">Settings</code> class.</p>
</blockquote>

<h3 id="settingsoptions">Settings([options])</h3>

<p>A class of full settings of the package.</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">settings</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">fsScandir</span><span class="p">.</span><span class="nx">Settings</span><span class="p">({</span> <span class="na">followSymbolicLinks</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>

<span class="kd">const</span> <span class="nx">entries</span> <span class="o">=</span> <span class="nx">fsScandir</span><span class="p">.</span><span class="nx">scandirSync</span><span class="p">(</span><span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">,</span> <span class="nx">settings</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="entry">Entry</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">name</code> — The name of the entry (<code class="language-plaintext highlighter-rouge">unknown.txt</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">path</code> — The path of the entry relative to call directory (<code class="language-plaintext highlighter-rouge">root/unknown.txt</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">dirent</code> — An instance of <a href="./src/types/index.ts"><code class="language-plaintext highlighter-rouge">fs.Dirent</code></a> class. On Node.js below 10.10 will be emulated by <a href="./src/utils/fs.ts"><code class="language-plaintext highlighter-rouge">DirentFromStats</code></a> class.</li>
  <li><code class="language-plaintext highlighter-rouge">stats</code> (optional) — An instance of <code class="language-plaintext highlighter-rouge">fs.Stats</code> class.</li>
</ul>

<p>For example, the <code class="language-plaintext highlighter-rouge">scandir</code> call for <code class="language-plaintext highlighter-rouge">tools</code> directory with one directory inside:</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
	<span class="nl">dirent</span><span class="p">:</span> <span class="nx">Dirent</span> <span class="p">{</span> <span class="nl">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">typedoc</span><span class="dl">'</span><span class="p">,</span> <span class="cm">/* … */</span> <span class="p">},</span>
	<span class="nx">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">typedoc</span><span class="dl">'</span><span class="p">,</span>
	<span class="nx">path</span><span class="p">:</span> <span class="dl">'</span><span class="s1">tools/typedoc</span><span class="dl">'</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="options">Options</h2>

<h3 id="stats">stats</h3>

<ul>
  <li>Type: <code class="language-plaintext highlighter-rouge">boolean</code></li>
  <li>Default: <code class="language-plaintext highlighter-rouge">false</code></li>
</ul>

<p>Adds an instance of <code class="language-plaintext highlighter-rouge">fs.Stats</code> class to the <a href="#entry"><code class="language-plaintext highlighter-rouge">Entry</code></a>.</p>

<blockquote>
  <p>:book: Always use <code class="language-plaintext highlighter-rouge">fs.readdir</code> without the <code class="language-plaintext highlighter-rouge">withFileTypes</code> option. ??TODO??</p>
</blockquote>

<h3 id="followsymboliclinks">followSymbolicLinks</h3>

<ul>
  <li>Type: <code class="language-plaintext highlighter-rouge">boolean</code></li>
  <li>Default: <code class="language-plaintext highlighter-rouge">false</code></li>
</ul>

<p>Follow symbolic links or not. Call <code class="language-plaintext highlighter-rouge">fs.stat</code> on symbolic link if <code class="language-plaintext highlighter-rouge">true</code>.</p>

<h3 id="throwerroronbrokensymboliclink"><code class="language-plaintext highlighter-rouge">throwErrorOnBrokenSymbolicLink</code></h3>

<ul>
  <li>Type: <code class="language-plaintext highlighter-rouge">boolean</code></li>
  <li>Default: <code class="language-plaintext highlighter-rouge">true</code></li>
</ul>

<p>Throw an error when symbolic link is broken if <code class="language-plaintext highlighter-rouge">true</code> or safely use <code class="language-plaintext highlighter-rouge">lstat</code> call if <code class="language-plaintext highlighter-rouge">false</code>.</p>

<h3 id="pathsegmentseparator"><code class="language-plaintext highlighter-rouge">pathSegmentSeparator</code></h3>

<ul>
  <li>Type: <code class="language-plaintext highlighter-rouge">string</code></li>
  <li>Default: <code class="language-plaintext highlighter-rouge">path.sep</code></li>
</ul>

<p>By default, this package uses the correct path separator for your OS (<code class="language-plaintext highlighter-rouge">\</code> on Windows, <code class="language-plaintext highlighter-rouge">/</code> on Unix-like systems). But you can set this option to any separator character(s) that you want to use instead.</p>

<h3 id="fs"><code class="language-plaintext highlighter-rouge">fs</code></h3>

<ul>
  <li>Type: <a href="./src/adapters/fs.ts"><code class="language-plaintext highlighter-rouge">FileSystemAdapter</code></a></li>
  <li>Default: A default FS methods</li>
</ul>

<p>By default, the built-in Node.js module (<code class="language-plaintext highlighter-rouge">fs</code>) is used to work with the file system. You can replace any method with your own.</p>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kr">interface</span> <span class="nx">FileSystemAdapter</span> <span class="p">{</span>
	<span class="nl">lstat</span><span class="p">?:</span> <span class="k">typeof</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">lstat</span><span class="p">;</span>
	<span class="nl">stat</span><span class="p">?:</span> <span class="k">typeof</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">stat</span><span class="p">;</span>
	<span class="nl">lstatSync</span><span class="p">?:</span> <span class="k">typeof</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">lstatSync</span><span class="p">;</span>
	<span class="nl">statSync</span><span class="p">?:</span> <span class="k">typeof</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">statSync</span><span class="p">;</span>
	<span class="nl">readdir</span><span class="p">?:</span> <span class="k">typeof</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readdir</span><span class="p">;</span>
	<span class="nl">readdirSync</span><span class="p">?:</span> <span class="k">typeof</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readdirSync</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">settings</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">fsScandir</span><span class="p">.</span><span class="nx">Settings</span><span class="p">({</span>
	<span class="na">fs</span><span class="p">:</span> <span class="p">{</span> <span class="na">lstat</span><span class="p">:</span> <span class="nx">fakeLstat</span> <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="old-and-modern-mode"><code class="language-plaintext highlighter-rouge">old</code> and <code class="language-plaintext highlighter-rouge">modern</code> mode</h2>

<p>This package has two modes that are used depending on the environment and parameters of use.</p>

<h3 id="old">old</h3>

<ul>
  <li>Node.js below <code class="language-plaintext highlighter-rouge">10.10</code> or when the <code class="language-plaintext highlighter-rouge">stats</code> option is enabled</li>
</ul>

<p>When working in the old mode, the directory is read first (<code class="language-plaintext highlighter-rouge">fs.readdir</code>), then the type of entries is determined (<code class="language-plaintext highlighter-rouge">fs.lstat</code> and/or <code class="language-plaintext highlighter-rouge">fs.stat</code> for symbolic links).</p>

<h3 id="modern">modern</h3>

<ul>
  <li>Node.js 10.10+ and the <code class="language-plaintext highlighter-rouge">stats</code> option is disabled</li>
</ul>

<p>In the modern mode, reading the directory (<code class="language-plaintext highlighter-rouge">fs.readdir</code> with the <code class="language-plaintext highlighter-rouge">withFileTypes</code> option) is combined with obtaining information about its entries. An additional call for symbolic links (<code class="language-plaintext highlighter-rouge">fs.stat</code>) is still present.</p>

<p>This mode makes fewer calls to the file system. It’s faster.</p>

<h2 id="changelog">Changelog</h2>

<p>See the <a href="https://github.com/nodelib/nodelib/releases">Releases section of our GitHub project</a> for changelog for each release version.</p>

<h2 id="license">License</h2>

<p>This software is released under the terms of the MIT license.</p>

  </body>
</html>
