<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>detective</title>
    <link rel="stylesheet" media="all" href="/assets/css/main.css"/>
  </head>
  <body class="bg-blue-900 p-8">
    <h1 id="detective">detective</h1>

<p>find all calls to <code class="language-plaintext highlighter-rouge">require()</code> by walking the AST</p>

<p><a href="http://travis-ci.org/browserify/detective"><img src="https://secure.travis-ci.org/browserify/detective.png" alt="build status" /></a></p>

<h1 id="example">example</h1>

<h2 id="strings">strings</h2>

<p>strings_src.js:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<p>strings.js:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">detective</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">detective</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">fs</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">src</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">/strings_src.js</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">requires</span> <span class="o">=</span> <span class="nx">detective</span><span class="p">(</span><span class="nx">src</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span><span class="nx">requires</span><span class="p">);</span>
</code></pre></div></div>

<p>output:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ node examples/strings.js
[ 'a', 'b', 'c' ]
</code></pre></div></div>

<h1 id="methods">methods</h1>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">detective</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">detective</span><span class="dl">'</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="detectivesrc-opts">detective(src, opts)</h2>

<p>Give some source body <code class="language-plaintext highlighter-rouge">src</code>, return an array of all the <code class="language-plaintext highlighter-rouge">require()</code> calls with
string arguments.</p>

<p>The options parameter <code class="language-plaintext highlighter-rouge">opts</code> is passed along to <code class="language-plaintext highlighter-rouge">detective.find()</code>.</p>

<h2 id="var-found--detectivefindsrc-opts">var found = detective.find(src, opts)</h2>

<p>Give some source body <code class="language-plaintext highlighter-rouge">src</code>, return <code class="language-plaintext highlighter-rouge">found</code> with:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">found.strings</code> - an array of each string found in a <code class="language-plaintext highlighter-rouge">require()</code></li>
  <li><code class="language-plaintext highlighter-rouge">found.expressions</code> - an array of each stringified expression found in a
<code class="language-plaintext highlighter-rouge">require()</code> call</li>
  <li><code class="language-plaintext highlighter-rouge">found.nodes</code> (when <code class="language-plaintext highlighter-rouge">opts.nodes === true</code>) - an array of AST nodes for each
argument found in a <code class="language-plaintext highlighter-rouge">require()</code> call</li>
</ul>

<p>Optionally:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">opts.word</code> - specify a different function name instead of <code class="language-plaintext highlighter-rouge">"require"</code></li>
  <li><code class="language-plaintext highlighter-rouge">opts.nodes</code> - when <code class="language-plaintext highlighter-rouge">true</code>, populate <code class="language-plaintext highlighter-rouge">found.nodes</code></li>
  <li><code class="language-plaintext highlighter-rouge">opts.isRequire(node)</code> - a function returning whether an AST <code class="language-plaintext highlighter-rouge">CallExpression</code>
node is a require call</li>
  <li><code class="language-plaintext highlighter-rouge">opts.parse</code> - supply options directly to
<a href="https://npmjs.org/package/acorn">acorn</a> with some support for esprima-style
options <code class="language-plaintext highlighter-rouge">range</code> and <code class="language-plaintext highlighter-rouge">loc</code></li>
  <li><code class="language-plaintext highlighter-rouge">opts.ecmaVersion</code> - default: 9</li>
</ul>

<h1 id="install">install</h1>

<p>With <a href="https://npmjs.org">npm</a> do:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install detective
</code></pre></div></div>

<h1 id="license">license</h1>

<p>MIT</p>

  </body>
</html>
